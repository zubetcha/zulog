---
title: 정규식 표현과 lastIndex
summary:
date: '2024-04-18'
draft: true
tags: ['regexp']
images: []
---

# 들어가며,

회사에서 공장과 관련한 비즈니스 로직에서는 정규식 표현으로 관리해야 하는 값이 많다. 정규식 표현을 사용하다 보면 어떤 값이 특정 패턴에 부합하는지, 부합하지 않는지에 따라 조건부 핸들링을 해야 하는 경우가 많은데, 이 때 흔하게 사용하는 메서드가 RegExp 객체의 test()였다.

프로젝트를 하면서 정규식 표현의 전역 플래그와 test 메서드에 대해서 새롭게 알게 된 게 있어 정리해서 남겨보려고 한다!

# 주혜님, 두 번째 조회할 때 동작이 이상해요

개발을 어느 정도 마무리한 후 개발팀 내부적으로 테스트하고 있을 때였다. 서버 개발자분이 확인하시다가 버그를 제보해 주셨는데, 같은 값으로 첫 번째 조회할 때랑 두 번째 조회할 때 동작이 다르다는 것이었다.

조회하려는 값이 정규식 패턴에 부합하는 경우 상세 화면으로 이동하고, 부합하지 않으면 알럿을 띄우는 로직이 있었는데 신기하게도 같은 값으로 한 번 조회해서 상세 화면으로 이동한 후 다시 조회 화면으로 돌아와 조회하면 두 번째는 알럿이 노출되고 있었다.

```jsx
const regexp = /[A-F]$/g

const handleSubmit = (value) => {
  if (!regexp.test(value)) {
    alert()
    return
  }

  navigate()
}
```

# 정규식과 플래그

정규 표현식에서는 아래와 같이 패턴 뒤에 특정한 특성을 지정하는 플래그를 둘 수 있다.

```jsx
const regexp = /pattern/flags;
const regexp = new RegExp("pattern", "flags");
```

- d: 부분 문자열 일치에 대한 인덱스 생성
- g: 전역 탐색
- i: 대소문자를 구분하지 않음
- m: 여러 줄에 걸쳐 탐색
- s: 개행 문자가 .과 일치
- u: “unicode”, 패턴을 유니코드 코드 포인트의 시퀀스로 간주
- y: 접착 탐색, 대상 문자열의 현재 위치에서 탐색을 시작함

이 중 전역 플래그인 g는 주어진 문자열에서 패턴과 일치하는 모든 항목에 대해 테스트해야 함을 의미한다.

# lastIndex와 test()

# 마치며.
