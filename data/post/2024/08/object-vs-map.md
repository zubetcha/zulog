---
title: 'Mapì€ ì •ë§ Object Literalë³´ë‹¤ ì„±ëŠ¥ì´ ì¢‹ì„ê¹Œ?'
summary:
date: '2024-08-09'
draft: true
tags: ['javascript']
images: []
---

# ë“¤ì–´ê°€ë©°,

ë©°ì¹  ì „ í”„ë¡œê·¸ë˜ë¨¸ìŠ¤ì—ì„œ ë¬¸ì œë¥¼ í’€ë˜ ì¤‘ ì‹ ê¸°í•œ í˜„ìƒ(?)ì„ ë°œê²¬í–ˆë‹¤.

hashmapì„ ì´ìš©í•´ì„œ í’€ì–´ì•¼ í•˜ëŠ” ë¬¸ì œì˜€ëŠ”ë° key-value êµ¬ì¡°ë¥¼ ë– ì˜¬ë ¸ì„ ë•Œ ê°€ì¥ ë¨¼ì € ìƒê°ë‚œ ê²Œ `Object Literal`(ìš°ë¦¬ê°€ í”íˆ ì¤‘ê´„í˜¸ë¡œ ì“°ëŠ” ê·¸ ê°ì²´)ì˜€ê¸° ë•Œë¬¸ì— ì ìš©í•´ì„œ ì œì¶œí–ˆìœ¼ë‚˜ ì‹œê°„ ì´ˆê³¼ë¡œ ì‹¤íŒ¨í•˜ê³  ë§ì•˜ë‹¤. ê·¸ëŸ°ë° ë¡œì§ì€ ê·¸ëŒ€ë¡œ ë‚¨ê²¨ë‘ê³  Object Literalì„ `Map` ê°ì²´ë¡œ ë°”ê¿¨ë”ë‹ˆ ì‹œê°„ ì´ˆê³¼ê°€ ëœ¨ì§€ ì•Šê³  ì˜ í†µê³¼í–ˆë‹¤.

Object Literalì´ Map ê°ì²´ì— ë¹„í•´ì„œ ì´ë ‡ê²Œ ì„±ëŠ¥ì´ ë–¨ì–´ì§€ë‚˜? ë¬¸ì œë¥¼ í’€ ë•Œ ë§ê³  ì‹¤ì œë¡œ íšŒì‚¬ì—ì„œ í”„ë¡œê·¸ë˜ë°ì„ í•  ë•Œì—ë„ Object Literalê³¼ Mapì„ ì ì¬ì ì†Œì— ì˜ ì‚¬ìš©í•˜ê³  ìˆë‚˜? í•˜ëŠ” ë°˜ì„±ì´ ë“¤ì–´ì„œ ì°¾ì•„ë³´ì•˜ë‹¤!

> `hashmap`  
> ìë£Œêµ¬ì¡° ì¤‘ í•˜ë‚˜ë¡œ, key-value ìŒì„ ì €ì¥í•œë‹¤. keyëŠ” ê³ ìœ í•´ì•¼ í•˜ë©°, keyë¥¼ ì‚¬ìš©í•´ ê°’ì— ë¹ ë¥´ê²Œ ì ‘ê·¼í•  ìˆ˜ ìˆë‹¤.

<br/>

# Object Literal

[Object Literal](https://developer.mozilla.org/ko/docs/Web/JavaScript/Reference/Global_Objects/Object)ì€ ì¤‘ê´„í˜¸ë¡œ í‘œí˜„í•˜ëŠ” ë°ì´í„° êµ¬ì¡°ì´ë‹¤. key-value í˜•íƒœë¡œ ë˜ì–´ ìˆì–´ íŠ¹ì • í‚¤ì— ì›í•˜ëŠ” ê°’ì„ ì €ì¥í•˜ê³ , ì ‘ê·¼í•´ì„œ ì‚¬ìš©í•  ìˆ˜ ìˆë‹¤. Object Literalì˜ ëª‡ ê°€ì§€ íŠ¹ì§•ì„ ë‚˜ì—´í•´ë³´ë©´,

- `non-iterable` í•˜ë‹¤. ì¦‰, ì§ì ‘ì ìœ¼ë¡œëŠ” ë°˜ë³µ ì‘ì—…ì„ í•  ìˆ˜ ì—†ë‹¤. Object.keys(), Object.entries(), for...in ë“±ìœ¼ë¡œ ìš°íšŒí•˜ëŠ” ë°©ë²•ìœ¼ë¡œëŠ” ê°€ëŠ¥í•˜ë‹¤.

```javascript
const obj = { a: 1, b: 2 }

Object.keys(obj) // ['a', 'b']
Object.entries(obj) // [['a', 1], ['b', 2]]
```

- keyë¡œ ì‚¬ìš©í•  ìˆ˜ ìˆëŠ” ë°ì´í„° íƒ€ì…ì´ `String`ê³¼ `Symbol` ë¿ì´ë‹¤.
- ì•„ì´í…œ ìˆ˜ë¥¼ ì§ì ‘ í™•ì¸í•  ìˆ˜ ì—†ë‹¤. Object.keys() ë“±ì„ í†µí•´ ê°„ì ‘ì ìœ¼ë¡œëŠ” í™•ì¸ì´ ê°€ëŠ¥í•˜ë‹¤.

```javascript
const obj = { a: 1, b: 2 }
const size = Object.keys(obj).length // 2
```

- `ì§ë ¬í™”`ì™€ `êµ¬ë¬¸ ë¶„ì„(ì—­ì§ë ¬í™”)`ë¥¼ ì§€ì›í•œë‹¤. JSON.stringify()ì™€ JSON.parse()ë¥¼ í†µí•´ ê°€ëŠ¥í•˜ë‹¤.

```javascript
const obj = { a: 1, b: 2 }

const stringified = JSON.stringify(obj) // '{"a":1,"b":2}'
const parsed = JSON.parse(stringified) // {a: 1, b: 2}
```

- í”„ë¡œí¼í‹°ë¥¼ ì‚­ì œí•˜ëŠ” ë©”ì„œë“œëŠ” ì§€ì›í•˜ì§€ ì•Šìœ¼ë©°, ì‚­ì œí•˜ê¸° ìœ„í•´ì„œëŠ” `delete` ì—°ì‚°ìë¥¼ ì‚¬ìš©í•´ì•¼ í•œë‹¤.

```javascript
const obj = { a: 1, b: 2 }

delete obj.a
console.log(obj) // {b: 2}
```

<br/>

## delete ì—°ì‚°ìì˜ slow delete ë¬¸ì œ

ìœ„ì˜ íŠ¹ì§•ì—ì„œ ì‚´í´ë´¤ë“¯ì´ Object Literalì˜ í”„ë¡œí¼í‹°ë¥¼ ì‚­ì œí•˜ê¸° ìœ„í•´ì„œëŠ” `delete` ì—°ì‚°ìë¥¼ ì‚¬ìš©í•´ì•¼ë§Œ í•œë‹¤. ê·¸ëŸ°ë° delete ì—°ì‚°ìëŠ” Map ê°ì²´ì˜ delete ë©”ì„œë“œì— ë¹„í•´, ì‚¬ì´ì¦ˆê°€ ì»¤ì§ˆìˆ˜ë¡ ì„±ëŠ¥ì´ ë” ì•ˆ ì¢‹ì•„ì§„ë‹¤ê³  í•œë‹¤. ì´ ë¬¸ì œì™€ ê´€ë ¨ëœ ë…¼ì˜ëŠ” [ì—¬ê¸°](https://stackoverflow.com/questions/43594092/slow-delete-of-object-properties-in-js-in-v8)ì—ì„œ í™•ì¸í•´ ë³¼ ìˆ˜ ìˆë‹¤.

ê°„ë‹¨í•˜ê²Œ ë§í•˜ë©´, í”„ë¡œí¼í‹°ì˜ ê°œìˆ˜ê°€ ë§ì„ìˆ˜ë¡ delete ì—°ì‚°ìë¥¼ í†µí•´ í”„ë¡œí¼í‹°ë¥¼ ì‚­ì œí•˜ëŠ” ë° ê±¸ë¦¬ëŠ” ì‹œê°„ì´ Mapì˜ delete ë©”ì„œë“œì— ë¹„í•´ í›¨ì”¬ ë” ëŠ˜ì–´ë‚œë‹¤ëŠ” ê²ƒì´ë‹¤. ìœ„ì˜ ìŠ¤íƒì˜¤ë²„í”Œë¡œìš°ì— ë”°ë¥´ë©´ node ë²„ì „ì— ë”°ë¼ì„œ ë‹¬ë¼ì§€ì§€ë§Œ íŠ¹ì • ê°œìˆ˜ê°€ ë„˜ì–´ê°€ë©´ ê¸‰ê²©íˆ ëŠë ¤ì§€ëŠ” ì–‘ìƒì„ ë³´ì¸ë‹¤ê³  í•œë‹¤.

```javascript
// node v20
const N0 = 50856

function fast() {
  const N = N0

  const o = {}
  for (let i = 0; i < N; i++) {
    o[i] = i
  }

  const t1 = Date.now()
  for (let i = 0; i < N; i++) {
    delete o[i]
  }
  const t2 = Date.now()

  console.log(N / (t2 - t1) + ' KOP/S')
}

function slow() {
  const N = N0 + 1 // adding just 1

  const o = {}
  for (let i = 0; i < N; i++) {
    o[i] = i
  }

  const t1 = Date.now()
  for (let i = 0; i < N; i++) {
    delete o[i]
  }
  const t2 = Date.now()

  console.log(N / (t2 - t1) + ' KOP/S')
}

fast()
slow()
```

ìœ„ ë§í¬ë¥¼ ë³´ë©´ V8 ì—”ì§„ ê°œë°œìê°€ ì§ì ‘ ì½”ë©˜íŠ¸ë¥¼ ì‘ì„±í•œ ê±¸ ë³¼ ìˆ˜ ìˆëŠ”ë°, V8 ê°œë°œìì— ë”°ë¥´ë©´ delete ì—°ì‚°ì´ ì¼ì–´ë‚  ë•Œë§ˆë‹¤ ì‚­ì œ ì‘ì—…ì„ ìœ„í•´ flat arrayì—ì„œ dictionaryë¡œ ì „í™˜í•˜ê¸° ìœ„í•œ ìš”ì†Œê°€ ì‹¤ì œë¡œ ì¡´ì¬í•˜ëŠ”ì§€ ê²€ì‚¬í•˜ëŠ”ë°, ì´ ê²€ì‚¬í•˜ëŠ” ì‘ì—…ì€ ì•„ì´í…œ ìˆ˜ê°€ ë§ì•„ì§ˆìˆ˜ë¡ ë” ì˜¤ëœ ì‹œê°„ì´ ì†Œìš”ëì—ˆë‹¤ê³  í•œë‹¤. ì´ ë¬¸ì œë¥¼ í•´ê²°í•˜ê¸° ìœ„í•´ íŠ¹ì • í¬ê¸° ì´í•˜ì˜ ê°ì²´ì—ì„œëŠ” ê²€ì‚¬í•˜ëŠ” ì‘ì—…ì„ ìŠ¤í‚µí•˜ë„ë¡ ìµœì í™” í–ˆëŠ”ë°, ì´ ì˜í–¥ì´ ìŠ¤íƒì˜¤ë²„í”Œë¡œìš°ì˜ í…ŒìŠ¤íŠ¸ì—ì„œ í™•ì¸ëœ ê²ƒìœ¼ë¡œ ë³´ì¸ë‹¤ê³  í•œë‹¤.

2017ë…„ë„ ê¸€ì´ë¯€ë¡œ, ì¶”í›„ì—ëŠ” íŠ¹ì • í¬ê¸°ë¡œ í™•ì¸í•˜ëŠ” ê²Œ ì•„ë‹Œ ê°€ë”ì”©ë§Œ í™•ì¸í•˜ëŠ” ê²ƒìœ¼ë¡œ ìˆ˜ì •í•˜ì—¬ ì ìš©í•  ì˜ˆì •ì´ë¼ê³  ë˜ì–´ ìˆëŠ”ë° ì‹¤ì œë¡œ ë‚´ê°€ í˜„ì¬ ì‚¬ìš©ì¤‘ì¸ v20ì—ì„œëŠ” fastì™€ slow í•¨ìˆ˜ë¥¼ ì‹¤í–‰í•  ë•Œë§ˆë‹¤ ì†ë„ê°€ ë‹¬ë¼ì§€ê³ , ë” ë¹ ë¥¸ ì¼€ì´ìŠ¤ë„ ë‹¬ë¼ì§€ëŠ” ê±¸ í™•ì¸í•  ìˆ˜ ìˆì—ˆë‹¤.

ì¶”ê°€ì ì¸ ì½”ë©˜íŠ¸ë¡œ, ê°€ëŠ¥í•˜ë©´ delete ì—°ì‚°ìëŠ” ì‚¬ìš©í•˜ì§€ ì•Šê³  ES6ì˜ Map/Setì„ ì‚¬ìš©í•˜ëŠ” ê²ƒì„ ê¶Œì¥í•˜ê³  ìˆë‹¤. delete ì—°ì‚°ìëŠ” V8 ì—”ì§„ì´ ë” ë§ì€ ê²€ì‚¬ë¥¼ ìˆ˜í–‰í•˜ë„ë¡ í•˜ê³ , ë¹ ë¥¸ ê²½ë¡œì—ì„œ ë²—ì–´ë‚˜ëŠ” ê²½ìš°ë„ ìƒê¸¸ ìˆ˜ ìˆê¸° ë•Œë¬¸ì— ë‹¤ì–‘í•œ ìƒí™©ì—ì„œ ì†ë„ ì €í•˜ê°€ ì¼ì–´ë‚  ìˆ˜ ìˆë‹¤ê³  í•œë‹¤!

> í”„ë¡œí¼í‹° ì‚­ì œê°€ ë¹ˆë²ˆí•˜ê²Œ ì¼ì–´ë‚  ìˆ˜ ìˆëŠ” ê²½ìš°ì—ëŠ” `Map/Set`ì„ ì‚¬ìš©í•˜ë„ë¡ í•˜ìğŸ™‚

<br/>

## ê°ì²´ ì£¼ì… ê³µê²© ë¬¸ì œ

Object Literalì˜ ë‘ ë²ˆì§¸ ë¬¸ì œì ì€ í”„ë¡œí¼í‹° ë³´ì•ˆ(?)ì— ì·¨ì•½í•˜ë‹¤ëŠ” ê²ƒì´ë‹¤.

ë³´í†µ ê°ì²´ì˜ í”„ë¡œí¼í‹°ë‚˜ ë©”ì„œë“œì— ì ‘ê·¼í•  ë•Œ `ì (.)`ì´ë‚˜ `ëŒ€ê´„í˜¸([])`ë¥¼ ì‚¬ìš©í•œë‹¤. ì´ëŸ¬í•œ ì ‘ê·¼ ë°©ì‹ì€ ì•„ë˜ì™€ ê°™ì€ ë¬¸ì œë“¤ì„ ì•¼ê¸°í•  ìˆ˜ ìˆë‹¤ê³  í•œë‹¤.

### 1. ê°ì²´ì˜ ëª¨ë“  í”„ë¡œí¼í‹°ì— ì ‘ê·¼ì´ ê°€ëŠ¥í•˜ë‹¤.

```javascript
exampleClass[userInput[0]] = userInput[1]
```

ë§Œì•½ exampleClassì˜ userInput[0] í‚¤ì— ë¯¼ê°í•œ ì •ë³´ê°€ í• ë‹¹ë˜ì–´ ìˆì—ˆë‹¤ í•˜ë”ë¼ë„ ìœ„ì˜ ì½”ë“œë¡œ ì¸í•´ ê°’ì¸ ìˆ˜ì •ë  ê²ƒì´ë‹¤.

### 2. í”„ë¡œí† íƒ€ì…ì˜ í”„ë¡œí¼í‹°ë¥¼ í¬í•¨í•œ ëª¨ë“  í”„ë¡œí¼í‹°ì— ì ‘ê·¼ì´ ê°€ëŠ¥í•˜ë‹¤.

```javascript
userInput = ['constructor', '{}']
exampleClass[userInput[0]] = userInput[1]
```

### 3.

<br/>

# Map

# hashmap

# ë§ˆì¹˜ë©°.

ref.

- [https://stackoverflow.com/questions/43594092/slow-delete-of-object-properties-in-js-in-v8](https://stackoverflow.com/questions/43594092/slow-delete-of-object-properties-in-js-in-v8)
- [https://github.com/eslint-community/eslint-plugin-security/blob/main/docs/the-dangers-of-square-bracket-notation.md](https://github.com/eslint-community/eslint-plugin-security/blob/main/docs/the-dangers-of-square-bracket-notation.md)
-
